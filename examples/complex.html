<html>
<head>

	<title>Complex Task Example</title>
	
	<script src="../source/task.js" type="text/javascript"></script>
	<script type="text/javascript">

		function handleOnLoad(e) { 
		
			var performTaskFunx = function(){
				var task = this;
				var timeout = setTimeout(function(){
					task.complete();
				},Math.round(Math.random()*3000));
			}

			var simple = TaskLibrary.Task.extend({
				name:"simple",
				performTask:performTaskFunx
			});

			var sequence = TaskLibrary.SequenceTask.extend({
				name:"sequence",
				tasks:[{
					name:"squence subtask 1",
					performTask:performTaskFunx
				},
				{
					name:"squence subtask 2",
					performTask:performTaskFunx
				},
				{
					name:"squence subtask 3",
					performTask:performTaskFunx
				}]
			});

			var parallel = TaskLibrary.ParallelTask.extend({
				name:"parallel",
				tasks:[{
					name:"parallel subtask 1",
					performTask:performTaskFunx
				},
				{
					name:"parallel subtask 2",
					performTask:performTaskFunx
				},
				{
					name:"parallel subtask 3",
					performTask:performTaskFunx
				}]
			});

			var complex = TaskLibrary.SequenceTask.extend({
				name:"complex",
				loggingEnabled:true,
				tasks:[sequence,simple,parallel],
				onChange:function(state,error){
					if(state == TaskLibrary.TaskStates.Completed){
						alert("complete");
					}
				}
			});

			complex.start(); 

		}

		

	</script>
</head>
<body onload="handleOnLoad();">
</body>
</html>