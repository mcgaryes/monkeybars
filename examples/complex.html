<html>
<head>

	<title>Complex Task Example</title>
	
	<script src="monkeybars.min.js" type="text/javascript"></script>
	<script src="../source/monkeybars.js" type="text/javascript"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="index.js"></script>
	<link rel="stylesheet" href="index.css">

	<script type="text/javascript">

		var task;

		function execute(e) { 
		
			var simple = MonkeyBars.Task.extend({
				name:"simple",
				performTask:performTaskFunx
			});

			var forTask = MonkeyBars.ForTask.extend({
				name:"for",
				count:2,
				performTask:performTaskFunx
			});

			var sequence = MonkeyBars.SequenceTask.extend({
				name:"sequence",
				tasks:[{
					name:"sequence subtask one",
					performTask:performTaskFunx
				},
				{
					name:"sequence sub task two",
					performTask:performTaskFunx
				}],
				performTask:function(){
					append("start",this.name);
					MonkeyBars.SequenceTask.prototype.performTask.call(this,task);
				}
			});

			var parallel = MonkeyBars.ParallelTask.extend({
				name:"parallel",
				tasks:[{
					name:"parallel subtask one",
					performTask:performTaskFunx
				},
				{
					name:"parallel subtask two",
					performTask:performTaskFunx
				}],
				performTask:function(){
					append("start",this.name);
					MonkeyBars.ParallelTask.prototype.performTask.call(this,task);
				}
			});

			task = MonkeyBars.SequenceTask.extend({
				name:"complex",
				loggingEnabled:true,
				tasks:[sequence,forTask,simple,parallel],
				onChange:function(state,error){
					if(state == MonkeyBars.TaskStates.Completed) {
						alert("complete");
					}
				}
			});

			task.start(); 

		}

	</script>
</head>
<body>

	<button id="start" onclick="start();">start</button>
	<button id="stop" onclick="stop();">cancel</button>
	<div id="log"></div>

</body>
</html>